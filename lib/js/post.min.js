"use strict";window.tsfPost=function(a){function b(){let a=[...document.getElementsByName("visibility")].filter(a=>a.checked)?.[0]?.value;if("password"===a){const b=document.getElementById("post_password")?.value;b?.length&&"0"===b&&(a="public")}return a}function c(){if(!document.querySelector(".tsf-flex"))return;const b=document.getElementById("tsf-flex-inpost-tabs-wrapper");let c={};const d=b=>{let e=b.querySelector(".tsf-flex-nav-tab-inner"),f=b.getElementsByClassName("tsf-flex-nav-name"),g=e.clientWidth<=b.clientWidth;if(g){if(+(b.dataset.displayedNames||1))return;b.dataset.displayedNames=1,a(f).stop(!1,!0).fadeIn(250)}else{if(!+(b.dataset.displayedNames||1))return;b.dataset.displayedNames=0,a(f).hide()}+b.dataset.displayedNames&&(e.clientWidth>b.clientWidth?(a(f).stop(!1,!0).hide(),b.dataset.displayedNames=0):setTimeout(()=>{cancelAnimationFrame(c[b.id]),c[b.id]=requestAnimationFrame(()=>d(b))},7))};window.addEventListener("tsf-flex-resize",a=>{const e=a.detail.target||b;e&&(c[e.id]=requestAnimationFrame(()=>d(e)))});const e=a=>{window.dispatchEvent(new CustomEvent("tsf-flex-resize",{bubbles:!1,cancelable:!1,detail:{target:a}}))};let f={};const g=new ResizeObserver(a=>{for(const b of a){let a=b.target;cancelAnimationFrame(f[a.id]),f[a.id]=requestAnimationFrame(()=>{a.dataset.lastWidth||=0,+a.clientWidth!=+a.dataset.lastWidth&&(a.dataset.lastWidth=a.clientWidth,e(a))})}});b&&g.observe(b),e()}function d(){tsfTabs.initStack("tsfSettings",{tabToggledEvent:new CustomEvent("tsf-flex-tab-toggled"),HTMLClasses:{wrapper:"tsf-flex-nav-tab-wrapper",tabRadio:"tsf-flex-nav-tab-radio",tabLabel:"tsf-flex-nav-tab-label",activeTab:"tsf-flex-tab-active",activeTabContent:"tsf-flex-tab-content-active"},fixHistory:!0})}function e(){const c=document.getElementById("autodescription_noindex");if(!c)return;const d=document.getElementById("autodescription_canonical"),e=1,f=2;let g,h=0,i="";const j=()=>{clearTimeout(g),g=setTimeout(()=>{d&&(i||=d.placeholder,d.placeholder=h&e||h&f?"":i)},50)},k=a=>{i=a,j()};a(document).on("tsf-updated-gutenberg-link",(a,b)=>k(b));const l=a=>{let b=c.querySelector("[value=\"0\"]"),d="";switch(a){case"password":case"private":d="noindex",h|=e;break;default:case"public":d=c.dataset.defaultUnprotected,h&=~e}b&&(b.innerHTML=c.dataset.defaultI18n.replace("%s",tsf.escapeString(tsf.decodeEntities(d)))),j()};a(document).on("tsf-updated-gutenberg-visibility",(a,b)=>l(b)),document.querySelector("#visibility .save-post-visibility")?.addEventListener("click",()=>l(b())),m.states.isPrivate?l("private"):m.states.isProtected?l("password"):l("public");const n=a=>{let b="";switch(+a){case 0:b=c.dataset.defaultUnprotected;break;case-1:b="index";break;case 1:b="noindex"}"noindex"===b?h|=f:h&=~f,j()};c.addEventListener("change",a=>n(a.target.value)),n(c.value)}function f(){const c=document.getElementById(n);if(!c)return;tsfTitle.setInputElement(c);const d=JSON.parse(document.getElementById(`tsf-title-data_${n}`)?.dataset.state||0);d&&(tsfTitle.updateStateOf(n,"allowReferenceChange",!d.refTitleLocked),tsfTitle.updateStateOf(n,"defaultTitle",d.defaultTitle),tsfTitle.updateStateOf(n,"addAdditions",d.addAdditions),tsfTitle.updateStateOf(n,"additionValue",d.additionValue),tsfTitle.updateStateOf(n,"additionPlacement",d.additionPlacement));const e=document.getElementById("autodescription_title_no_blogname");e&&(e.addEventListener("change",a=>{let b=!a.target.checked;m.params.additionsForcedDisabled?b=!1:m.params.additionsForcedEnabled&&(b=!0),tsfTitle.updateStateOf(n,"addAdditions",b)}),e.dispatchEvent(new Event("change")));const f=a=>{let b="";switch(a){case"password":b=tsfTitle.protectedPrefix;break;case"private":b=tsfTitle.privatePrefix;break;default:case"public":b=""}tsfTitle.updateStateOf(n,"prefixValue",b)};a(document).on("tsf-updated-gutenberg-visibility",(a,b)=>f(b)),document.querySelector("#visibility .save-post-visibility")?.addEventListener("click",()=>f(b())),m.states.isPrivate?f("private"):m.states.isProtected&&f("password");const g=a=>{a=a?.trim()||"",tsfTitle.updateStateOf(n,"defaultTitle",(tsfTitle.stripTitleTags?tsf.stripTags(a):a)||tsfTitle.untitledTitle)};m.params.isFront||(document.querySelector("#titlewrap #title")?.addEventListener("input",a=>{g(a.target.value)}),a(document).on("tsf-updated-gutenberg-title",(a,b)=>{g(b)})),tsfTitle.enqueueUnregisteredInputTrigger(n)}function g(){const c=document.getElementById(o);if(!c)return;tsfDescription.setInputElement(c);const d=JSON.parse(document.getElementById(`tsf-description-data_${o}`)?.dataset.state||0);d&&(tsfDescription.updateStateOf(o,"allowReferenceChange",!d.refDescriptionLocked),tsfDescription.updateStateOf(o,"defaultDescription",d.defaultDescription.trim())),tsfDescription.enqueueUnregisteredInputTrigger(o);const e=a=>{let b=tsfDescription.getStateOf(o,"useDefaultDescription"),c=!0;switch(a){case"password":case"private":c=!1;break;default:case"public":c=!0}c!==b&&tsfDescription.updateStateOf(o,"useDefaultDescription",c)};a(document).on("tsf-updated-gutenberg-visibility",(a,b)=>e(b)),document.querySelector("#visibility .save-post-visibility")?.addEventListener("click",()=>e(b())),m.states.isPrivate?e("private"):m.states.isProtected&&e("password")}function h(){tsfSocial.setInputInstance(p,n,o);const a=JSON.parse(document.getElementById(`tsf-social-data_${p}`)?.dataset.settings||0);a&&(tsfSocial.updateStateOf(p,"addAdditions",a.og.state.addAdditions),tsfSocial.updateStateOf(p,"defaults",{ogTitle:a.og.state.defaultTitle,twTitle:a.tw.state.defaultTitle,ogDesc:a.og.state.defaultDesc,twDesc:a.tw.state.defaultDesc}),tsfSocial.updateStateOf(p,"inputLocks",{ogTitle:a.og.state?.titleLock||!1,twTitle:a.tw.state?.titleLock||!1,ogDesc:a.og.state?.descLock||!1,twDesc:a.tw.state?.descLock||!1}))}function i(){const a=()=>{tsfTitle.enqueueUnregisteredInputTrigger(n),tsfDescription.enqueueUnregisteredInputTrigger(o)};document.getElementById("tsf-flex-inpost-tab-general")?.addEventListener("tsf-flex-tab-toggled",a),window.addEventListener("tsf-flex-resize",a)}function j(){if(!m.states.isGutenbergPage)return;const b=document.querySelector(".tsf-seo-bar"),c=document.querySelector("#tsf-doing-it-right-wrap .tsf-ajax"),d=document.getElementById("autodescription_socialimage-url"),e=tsfSocial.getInputInstance(p)?.inputs?.ogDesc,f=tsfSocial.getInputInstance(p)?.inputs?.twDesc,g={seobar:!!b,metadescription:!!document.getElementById(o),ogdescription:!!e,twdescription:!!f,imageurl:!!d},h=e=>{e=tsf.convertJSONResponse(e);const f=75;setTimeout(()=>{if("tsfDescription"in window&&tsfDescription.updateStateOf(o,"defaultDescription",e.data.metadescription.trim()),"tsfSocial"in window){const a=tsfSocial.getStateOf(p,"defaults");a.ogDesc=e.data.ogdescription.trim(),a.twDesc=e.data.twdescription.trim(),tsfSocial.updateStateOf(p,"defaults",a)}d&&(d.placeholder=tsf.decodeEntities(e.data.imageurl),d.dispatchEvent(new Event("change"))),"tsfAys"in window&&tsfAys.reset()},f),a(b).fadeOut(f,()=>{c&&tsf.unsetAjaxLoader(c,!0),b.innerHTML=e.data.seobar}).fadeIn(250,()=>{"tsfTT"in window&&tsfTT.triggerReset()})},i=()=>{c&&tsf.unsetAjaxLoader(c,!1)};document.addEventListener("tsf-gutenberg-onsave",()=>{c&&tsf.resetAjaxLoader(c),c&&tsf.setAjaxLoader(c),wp.ajax.send("tsf_update_post_data",{data:{nonce:tsf.l10n.nonces.edit_posts,post_id:m.states.id,get:g},timeout:7e3}).done(h).fail(i)})}function k(){e(),f(),g(),h(),i()}function l(){c(),d(),j()}const m="undefined"!=typeof tsfPostL10n&&tsfPostL10n,n="autodescription_title",o="autodescription_description",p="autodescription_social_singular";return Object.assign({load:()=>{document.body.addEventListener("tsf-onload",k),document.body.addEventListener("tsf-ready",l)}},{l10n:m})}(jQuery),window.tsfPost.load();
