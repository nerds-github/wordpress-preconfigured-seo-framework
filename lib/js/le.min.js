"use strict";window.tsfLe=function(){function a(){tsfTT.triggerReset()}function b(a){const b=JSON.parse(document.getElementById(`tsfLeData[${a}]`)?.dataset.le||0)||{};for(const c in b){const a=document.getElementById("autodescription-quick[%s]".replace("%s",c));if(a)if(b[c].isSelect){tsf.selectByValue(a,b[c].value);const d=a.querySelector("[value=\"0\"]");d&&(d.innerHTML=d.innerHTML.replace("%s",tsf.escapeString(tsf.decodeEntities(b[c].default))))}else a.value=tsf.decodeEntities(b[c].value),b[c].placeholder&&(a.placeholder=tsf.decodeEntities(b[c].placeholder))}}function c(a){return b(a)}function d(a){return JSON.parse(document.getElementById(`tsfLePostData[${a}]`)?.dataset.lePostData||0)||{}}function e(a){const b=document.getElementById(`edit-${a}`);let c="public";if(b?.querySelector("[name=keep_private]")?.checked)c="private";else{const a=b?.querySelector("[name=post_password]")?.value;a?.length&&"0"!==a&&(c="password")}return c}function f(a,b){const c=document.getElementById(`edit-${a}`);b=tsfUtils.debounce(b,20),c?.querySelector("[name=post_password]")?.addEventListener("input",b),c?.querySelector("[name=keep_private]")?.addEventListener("click",b)}function g(a){const b="autodescription-quick[doctitle]",c=document.getElementById(b);if(!c)return;tsfTitle.setInputElement(c);const g=JSON.parse(document.getElementById(`tsfLeTitleData[${a}]`)?.dataset.leTitle||0);g&&(tsfTitle.updateStateOf(b,"allowReferenceChange",!g.refTitleLocked),tsfTitle.updateStateOf(b,"defaultTitle",g.defaultTitle.trim()),tsfTitle.updateStateOf(b,"addAdditions",g.addAdditions),tsfTitle.updateStateOf(b,"additionValue",g.additionValue.trim()),tsfTitle.updateStateOf(b,"additionPlacement",g.additionPlacement));const h=()=>{let c="";switch(e(a)){case"password":c=tsfTitle.protectedPrefix;break;case"private":c=tsfTitle.privatePrefix;break;default:case"public":c=""}tsfTitle.updateStateOf(b,"prefixValue",c)};f(a,h),h();const i=a=>{const c=(a.originalEvent||a).target,d=c.value?.trim()||"",e=g?.tsfTermPrefix?.trim()||"";let f=(tsfTitle.stripTitleTags?tsf.stripTags(d):d)||tsfTitle.untitledTitle;e.length&&(window.isRtl?f=`${f} ${e}`:f=`${e} ${f}`),f=tsf.escapeString(tsf.decodeEntities(f.trim())),tsfTitle.updateStateOf(b,"defaultTitle",f)},j=document.getElementById(`edit-${a}`),k=j?.querySelector("[name=post_title]"),l=j?.querySelector("[name=name]");k&&!d(a).isFront&&(k.addEventListener("input",i),k.dispatchEvent(new Event("input"))),l&&(l.addEventListener("input",i),l.dispatchEvent(new Event("input"))),tsfTT.triggerReset()}function h(a){const b="autodescription-quick[description]",c=document.getElementById(b);if(c){tsfDescription.setInputElement(c);const d=JSON.parse(document.getElementById(`tsfLeDescriptionData[${a}]`)?.dataset.leDescription||0);d&&(tsfDescription.updateStateOf(b,"allowReferenceChange",!d.refDescriptionLocked),tsfDescription.updateStateOf(b,"defaultDescription",d.defaultDescription.trim())),tsfTT.triggerReset()}}function i(a){document.getElementById("autodescription-meta[noindex]");let b="";const c="autodescription-quick[canonical]",e=document.getElementById(c);if(!e)return;tsfCanonical.setInputElement(e);const f=JSON.parse(document.getElementById(`tsfLeCanonicalData[${a}]`)?.dataset.leCanonical||0);f&&tsfCanonical.updateStateOf(c,"allowReferenceChange",!f.refCanonicalLocked);const g=document.getElementById(`edit-${a}`),h=g?.querySelector("[name=post_title]"),i=g?.querySelector("[name=name]");h&&!d(a).isFront&&(h.addEventListener("input",setDefaultTitle),h.dispatchEvent(new Event("input")))}function j(){document.addEventListener("tsfLeDispatchUpdate",l),document.addEventListener("tsfLeUpdated",a)}function k(){let a,d;a=window.inlineEditPost?.edit,a&&(window.inlineEditPost.edit=function(c){let d=a.apply(this,arguments);return("object"==typeof c&&(c=window.inlineEditPost?.getId(c)),!c)?d:(b(c),i(c),g(c),h(c),window.tsfC?.resetCounterListener(),d)}),d=window.inlineEditTax?.edit,d&&(window.inlineEditTax.edit=function(a){let b=d.apply(this,arguments);return("object"==typeof a&&(a=window.inlineEditTax?.getId(a)),!a)?b:(c(a),i(a),g(a),h(a),window.tsfC?.resetCounterListener(),b)})}const l=tsfUtils.debounce(()=>{document.dispatchEvent(new CustomEvent("tsfLeUpdated"))},50);return{load:()=>{document.body.addEventListener("tsf-onload",j),document.body.addEventListener("tsf-onload",k)}}}(),window.tsfLe.load();
