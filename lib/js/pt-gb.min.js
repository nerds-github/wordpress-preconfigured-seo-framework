"use strict";window.tsfPTGB=function(){function a(a,b){return e[a]?.i18n[b]||""}function b(a){const b=()=>document.getElementById(`autodescription[_primary_term_${a}]`),c=()=>+b().value,d=a=>+(b().value=+a);return{get:c,set:d,revalidate:a=>{const b=c();return a.includes(b)?b:d(a?.[0]||0)},register:()=>{const b=document.getElementById("tsf-gutenberg-data-holder");return b?(b.insertAdjacentHTML("beforeend",wp.template("tsf-primary-term-selector")({taxonomy:e[a]})),o[a]=!0):o[a]=!1},isRegistered:()=>o[a]||!1}}function c(){function c({taxonomySlug:c,_legacySelectedTerms:d}){const e=b(c),[g,h]=i(e.get()),[o,p]=i(!1),[q,r]=i(!1),{selectedTerms:s,loading:t,availableTerms:u,_taxonomy:v}=l(a=>{const{getTaxonomy:b,getEntityRecords:d,isResolving:e}=a("core"),{getEditedPostAttribute:f}=a("core/editor"),g=b(c),h=["taxonomy",c,n];return{selectedTerms:f(g?.rest_base)||m,loading:q||e("getEntityRecords",h),availableTerms:o||d(...h)||m,_taxonomy:g}},[c,q,o]);if(j(()=>{s.includes(+g)&&e.get()===+g||(e.revalidate(s),h(e.get()))},[s]),j(()=>(v?.rest_base&&d?.length&&!q&&(!o?.length||d.filter(a=>!u.map(a=>a.id).includes(a)).length)&&(r(!0),wp.apiFetch({path:wp.url?.addQueryArgs(`/wp/v2/${v.rest_base}`,n)}).then(a=>{p(a)}).finally(()=>{r(!1)})),()=>{r(!1)}),[d]),2>s?.length)return e.set(0),null;return f(k,{label:a(c,"selectPrimary"),value:g,className:"tsf-pt-gb-selector",onChange:a=>{s.includes(+a)&&(e.set(a),h(e.get()),tsfAys.registerChange())},options:(()=>u.map(a=>s.includes(a?.id)&&{value:a.id,label:tsf.decodeEntities(a?.name)}).filter(Boolean)||"")(),disabled:(()=>!(s.length&&u.length&&!t))()})}if(Object.keys(e).length){for(let a in e)b(a).register();wp.hooks.addFilter("editor.PostTaxonomyType","tsf/pt",a=>class extends h{render(){return b(this.props?.slug).isRegistered()?f(g,null,f(a,{...this.props}),f(c,{taxonomySlug:this.props?.slug,_legacySelectedTerms:this.props?.terms})):f(a,{...this.props})}})}}const d="undefined"!=typeof tsfPTL10n&&tsfPTL10n,e=d.taxonomies,{createElement:f,Fragment:g,Component:h,useState:i,useEffect:j}=wp.element,{SelectControl:k}=wp.components,{useSelect:l}=wp.data,m=[],n={per_page:-1,orderby:"id",order:"asc",_fields:"id,name"};let o={};return Object.assign({load:()=>{document.body.addEventListener("tsf-onload",c)}},{l10n:d})}(),window.tsfPTGB.load();
