"use strict";window.tsfPTGB=function(){function a(a,b){return e[a]?.i18n[b]||""}function b(a){const b=()=>document.getElementById(`autodescription[_primary_term_${a}]`),c=()=>+b().value,d=a=>b().value=+a;return{get:c,set:d,revalidate:a=>{const b=c();return a.includes(b)?b:d(a?.[0]||0)},registerPostField:()=>{const b=document.getElementById("tsf-gutenberg-data-holder");b?(b.insertAdjacentHTML("beforeend",wp.template("tsf-primary-term-selector")({taxonomy:e[a]})),o.set(a,!0)):o.set(a,!1)},isPostFieldRegistered:()=>!!o.get(a)}}function c(){function c(c){const{taxonomySlug:d}=c,e=b(d),[g,h]=i(e.get()),{selectedTerms:o,loading:p,availableTerms:q}=l(a=>{const{getTaxonomy:b,getEntityRecords:c,isResolving:e}=a("core"),{getEditedPostAttribute:f}=a("core/editor"),g=b(d),h=["taxonomy",d,n];return{selectedTerms:f(g?.rest_base)||m,loading:e("getEntityRecords",h),availableTerms:c(...h)||m}},[d]);if(j(()=>{o.includes(+g)&&e.get()===+g||(e.revalidate(o),h(e.get()))},[o]),2>o?.length)return e.set(0),null;return f(k,{label:a(d,"selectPrimary"),value:g,className:"tsf-pt-gb-selector",onChange:a=>{o.includes(+a)&&(e.set(a),h(e.get()),tsfAys.registerChange())},options:(()=>q.map(a=>o.includes(a?.id)&&{value:a.id,label:tsf.decodeEntities(a?.name)}).filter(Boolean)||"")(),disabled:(()=>!(o.length&&q.length&&!p))()})}if(Object.keys(e).length){for(let a in e)b(a).registerPostField();wp.hooks.addFilter("editor.PostTaxonomyType","tsf/pt",a=>class extends h{render(){return b(this.props?.slug).isPostFieldRegistered()?f(g,null,f(a,{...this.props}),f(c,{taxonomySlug:this.props?.slug})):f(a,{...this.props})}})}}const d=tsfPTL10n,e=d.taxonomies,{createElement:f,Fragment:g,Component:h,useState:i,useEffect:j}=wp.element,{SelectControl:k}=wp.components,{useSelect:l}=wp.data,m=[],n={per_page:-1,orderby:"id",order:"asc",_fields:"id,name"},o=new Map;return Object.assign({load:()=>{document.body.addEventListener("tsf-ready",c)}},{l10n:d})}(),window.tsfPTGB.load();
