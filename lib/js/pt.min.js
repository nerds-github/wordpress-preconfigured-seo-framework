"use strict";window.tsfPT=function(){function a(a,b){return f[a]?.i18n[b]||""}function b(a){const b=()=>document.getElementById(`autodescription[_primary_term_${a}]`),c=()=>+b().value,d=a=>b().value=+a;return{get:c,set:d,revalidate:a=>{const b=c();return a.includes(b)?b:d(a?.[0]||0)},registerPostField:()=>{const b=document.getElementById(`${a}div`);b?(b.insertAdjacentHTML("beforeend",wp.template("tsf-primary-term-selector")({taxonomy:f[a]})),g.set(a,!0)):g.set(a,!1)},isPostFieldRegistered:()=>!!g.get(a)}}function c(a){const b=()=>{const b=`get.${a}`;return h.get(b)??h.set(b,[...document.querySelectorAll(`#${a}checklist, #${a}checklist-pop`)]).get(b)},c=()=>{const c=`getInputs.${a}`;return h.get(c)??h.set(c,b().flatMap(a=>[...a.querySelectorAll("input[type=checkbox]")])).get(c)},d=()=>b().flatMap(a=>[...a.querySelectorAll("input[type=checkbox]:checked")]),e=()=>[...new Map(d().reverse().map(a=>[+a.value,a])).values()];return{get:b,getInputs:c,getInputsChecked:d,getInputsUniqueChecked:e,getInputsUniqueCheckedValues:()=>[...new Set(e().map(a=>+a.value))],getInputWithValue:a=>c().filter(b=>b.value==a),clearCache:()=>h.clear()}}function d(){if(!Object.keys(f).length)return;const d=new ResizeObserver(a=>{for(let b of a){if(!b.target.checkVisibility())continue;const{clientWidth:a,offsetWidth:c}=b.target;b.target.parentElement.querySelector(".tsf-primary-term-selector-help-wrap").style.insetInlineEnd=`${c-a+parseFloat(getComputedStyle(b.target).paddingInlineEnd)}px`}}),e=(a,b)=>{document.getElementById(`tsf-primary-term-selector-help-${a}`)?.classList.toggle("hidden","show"!==b)},g=a=>{const b=()=>{document.getElementById(`taxonomy-${a}`)?.querySelectorAll(".tabs-panel").forEach(a=>{d.observe(a)})};(()=>{const c=document.getElementById(`${a}-adder`);if(c){const b=c.querySelector(".taxonomy-add-new");let d=b?getComputedStyle(b).marginTop:"10px";c.style.position="relative",c.insertAdjacentHTML("beforeend",wp.template("tsf-primary-term-selector-help-above")({taxonomySlug:a,taxonomy:f[a]})),c.querySelector(".tsf-primary-term-selector-help-wrap").style.top=d}else{const b=document.getElementById(`taxonomy-${a}`);if(!b)return!1;b.style.position="relative",b.insertAdjacentHTML("beforeend",wp.template("tsf-primary-term-selector-help")({taxonomySlug:a,taxonomy:f[a]})),helpWrap=b.querySelector(".tsf-primary-term-selector-help-wrap")}return tsfTT.triggerReset(),b(),!0})()},h=d=>{const f=b(d),g=c(d),h="tsf-primary-term-selector",i=document.createElement("span");i.classList.add(h),i.innerHTML=`<input type=radio name="tsf-primary-term-${d}" title="${a(d,"makePrimary")}" aria-label="${a(d,"makePrimary")}">`;const j=a=>{const b=i.cloneNode(!0),c=b.querySelector("input");b.dataset.tsfRadioValue=c.value=a,g.getInputWithValue(a).forEach(a=>{a.closest("label").insertAdjacentElement("afterend",b),c.addEventListener("change",m)})},k=a=>{[...document.getElementsByClassName(h)].forEach(b=>{a==b.dataset.tsfRadioValue&&b.remove()})},l=a=>{[...document.getElementsByClassName(h)].forEach(b=>{a==b.dataset.tsfRadioValue&&(b.firstElementChild.checked=!0)})},m=a=>{a.target.checked&&f.set(a.target.value)},n=a=>{const b=g.getInputsUniqueChecked().length;let c=!1;if(a.target.checked?1===b?(g.getInputsUniqueCheckedValues().forEach(a=>{k(a)}),c=!0,e(d,"hide")):2===b?(g.getInputsUniqueCheckedValues().forEach(a=>{j(a)}),e(d,"show")):j(a.target.value):(k(a.target.value),c=!0,1===b&&(g.getInputsUniqueCheckedValues().forEach(a=>{k(a)}),e(d,"hide"))),c){const a=f.get();f.revalidate(g.getInputsUniqueCheckedValues());const b=f.get();b!==a&&l(b)}},o=()=>{g.getInputs().forEach(a=>{a.addEventListener("change",n)}),1<g.getInputsUniqueCheckedValues().length?(g.getInputsUniqueCheckedValues().forEach(a=>{j(a)}),e(d,"show")):e(d,"hide"),l(f.get())};document.getElementById(`${d}div`)?.addEventListener("wpListAddEnd",a=>{a.detail?.[0]?.what===d&&([...document.getElementsByClassName(h)].forEach(a=>{a.remove()}),g.clearCache(),o())}),o()};for(let a in f)if(c(a).get()){const d=b(a);d.registerPostField(),d.isPostFieldRegistered()&&(g(a),h(a),d.revalidate(c(a).getInputsUniqueCheckedValues()))}}const e="undefined"!=typeof tsfPTL10n&&tsfPTL10n,f=e?.taxonomies||{},g=new Map,h=new Map;return Object.assign({load:()=>{document.body.addEventListener("tsf-onload",d)}},{l10n:e})}(),window.tsfPT.load();
