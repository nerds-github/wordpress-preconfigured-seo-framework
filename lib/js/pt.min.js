"use strict";window.tsfPT=function(){function a(a,b){return f[a]?.i18n[b]||""}function b(a){const b=()=>document.getElementById(`autodescription[_primary_term_${a}]`),c=()=>+b().value,d=a=>b().value=+a;return{get:c,set:d,revalidate:a=>{const b=c();return a.includes(b)?b:d(a?.[0]||0)},registerPostField:()=>{const b=document.getElementById(`${a}div`);b?(b.insertAdjacentHTML("beforeend",wp.template("tsf-primary-term-selector")({taxonomy:f[a]})),g.set(a,!0)):g.set(a,!1)},isPostFieldRegistered:()=>!!g.get(a)}}function c(a){const b=()=>document.getElementById(`${a}checklist`),c=()=>[...b().querySelectorAll("input[type=checkbox]")].sort((c,a)=>c.value-a.value),d=()=>document.getElementById(`taxonomy-${a}`).querySelectorAll(".categorychecklist input[type=checkbox]"),e=()=>c().filter(a=>a.checked),f=()=>e().map(a=>+a.value);return{getWrap:b,getInputs:c,getAllInputs:d,getInputsChecked:e,getInputsCheckedValues:f,subscribe:a=>{const c=()=>a(f()),e=()=>{d().forEach(a=>{a.addEventListener("change",c)})};new MutationObserver(()=>{e(),c()}).observe(b(),{childList:!0}),e(),c()}}}function d(){if(Object.keys(f).length){const d=d=>{const e=b(d),f=c(d),g=`tsf-primary-term-${d}`,h=`${g}-select`;let i=!1;const j=a=>document.createElement(a),k=()=>{const a=j("option"),b=document.getElementById(h);b.innerHTML="",b.append(...f.getInputsChecked().map(b=>{const c=a.cloneNode();return c.value=b.value,c.label=tsf.decodeEntities(b.parentElement.textContent.trim()),c})),tsf.selectByValue(b,e.get())},l=()=>{const b=j("div"),c=j("label"),f=j("select");b.id=g,b.classList.add("tsf-primary-term-selector-wrap"),c.innerText=a(d,"selectPrimary"),f.name=f.id=h,c.setAttribute("for",h),b.append(c,f),document.getElementById(`taxonomy-${d}`).insertBefore(b,document.getElementById(`${d}-adder`)?.nextSibling),f.addEventListener("change",a=>{e.set(a.target.value)})};f.subscribe(()=>{1<f.getInputsChecked().length?(!i&&(i=!0,l()),k(),e.revalidate(f.getInputsCheckedValues())):i&&(document.getElementById(g)?.remove(),i=!1,e.set(0))})};for(let a in f)if(c(a).getWrap()){const c=b(a);c.registerPostField(),c.isPostFieldRegistered()&&d(a)}}}const e="undefined"!=typeof tsfPTL10n&&tsfPTL10n,f=e?.taxonomies||{},g=new Map;return Object.assign({load:()=>{document.body.addEventListener("tsf-onload",d)}},{l10n:e})}(),window.tsfPT.load();
